{"ast":null,"code":"import _objectSpread from\"/Users/abr/DAMN/inventory-system/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/RegisterPage.js\nimport React,{useState}from'react';import{useNavigate,Link}from'react-router-dom';import{registerUser}from'../services/api';import{Container,Form,Button,Row,Col,Card,Alert}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RegisterPage(){const[formData,setFormData]=useState({username:'',email:'',first_name:'',last_name:'',password:'',password2:'',role:'Staff'// Default role\n});const[error,setError]=useState('');const[success,setSuccess]=useState('');const navigate=useNavigate();const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');try{await registerUser(formData);setSuccess('Registration successful! Redirecting to login...');setTimeout(()=>{navigate('/login');},2000);}catch(err){var _err$response;const errorData=(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data;if(errorData){const messages=Object.keys(errorData).map(key=>\"\".concat(key,\": \").concat(errorData[key])).join(' ');setError(messages||'Failed to register.');}else{setError('An unexpected error occurred.');}}};return/*#__PURE__*/_jsx(Container,{className:\"mt-5\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-md-center\",children:/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Register New User\"}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:success}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"username\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"First Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"first_name\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Last Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"last_name\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password2\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Role\"}),/*#__PURE__*/_jsxs(Form.Select,{name:\"role\",value:formData.role,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Staff\",children:\"Staff\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Manager\",children:\"Manager\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Register\"})})]})]}),/*#__PURE__*/_jsxs(Card.Footer,{className:\"text-center\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Log In\"})]})]})})})});}export default RegisterPage;","map":{"version":3,"names":["React","useState","useNavigate","Link","registerUser","Container","Form","Button","Row","Col","Card","Alert","jsx","_jsx","jsxs","_jsxs","RegisterPage","formData","setFormData","username","email","first_name","last_name","password","password2","role","error","setError","success","setSuccess","navigate","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","setTimeout","err","_err$response","errorData","response","data","messages","Object","keys","map","key","concat","join","className","children","md","Body","variant","onSubmit","Group","Label","Control","type","onChange","required","Select","Footer","to"],"sources":["/Users/abr/DAMN/inventory-system/frontend/src/pages/RegisterPage.js"],"sourcesContent":["// src/pages/RegisterPage.js\nimport React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { registerUser } from '../services/api';\nimport { Container, Form, Button, Row, Col, Card, Alert } from 'react-bootstrap';\n\nfunction RegisterPage() {\n  const [formData, setFormData] = useState({\n    username: '',\n    email: '',\n    first_name: '',\n    last_name: '',\n    password: '',\n    password2: '',\n    role: 'Staff', // Default role\n  });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n\n    try {\n      await registerUser(formData);\n      setSuccess('Registration successful! Redirecting to login...');\n      setTimeout(() => {\n        navigate('/login');\n      }, 2000);\n    } catch (err) {\n      const errorData = err.response?.data;\n      if (errorData) {\n        const messages = Object.keys(errorData).map(key => `${key}: ${errorData[key]}`).join(' ');\n        setError(messages || 'Failed to register.');\n      } else {\n        setError('An unexpected error occurred.');\n      }\n    }\n  };\n\n  return (\n    <Container className=\"mt-5\">\n      <Row className=\"justify-content-md-center\">\n        <Col md={6}>\n          <Card>\n            <Card.Body>\n              <h2 className=\"text-center mb-4\">Register New User</h2>\n              {error && <Alert variant=\"danger\">{error}</Alert>}\n              {success && <Alert variant=\"success\">{success}</Alert>}\n              <Form onSubmit={handleSubmit}>\n                <Form.Group className=\"mb-3\"><Form.Label>Username</Form.Label><Form.Control type=\"text\" name=\"username\" onChange={handleChange} required /></Form.Group>\n                <Form.Group className=\"mb-3\"><Form.Label>Email</Form.Label><Form.Control type=\"email\" name=\"email\" onChange={handleChange} required /></Form.Group>\n                <Form.Group className=\"mb-3\"><Form.Label>First Name</Form.Label><Form.Control type=\"text\" name=\"first_name\" onChange={handleChange} required /></Form.Group>\n                <Form.Group className=\"mb-3\"><Form.Label>Last Name</Form.Label><Form.Control type=\"text\" name=\"last_name\" onChange={handleChange} required /></Form.Group>\n                <Form.Group className=\"mb-3\"><Form.Label>Password</Form.Label><Form.Control type=\"password\" name=\"password\" onChange={handleChange} required /></Form.Group>\n                <Form.Group className=\"mb-3\"><Form.Label>Confirm Password</Form.Label><Form.Control type=\"password\" name=\"password2\" onChange={handleChange} required /></Form.Group>\n                <Form.Group className=\"mb-3\"><Form.Label>Role</Form.Label><Form.Select name=\"role\" value={formData.role} onChange={handleChange}><option value=\"Staff\">Staff</option><option value=\"Manager\">Manager</option></Form.Select></Form.Group>\n                <div className=\"d-grid\"><Button variant=\"primary\" type=\"submit\">Register</Button></div>\n              </Form>\n            </Card.Body>\n            <Card.Footer className=\"text-center\">Already have an account? <Link to=\"/login\">Log In</Link></Card.Footer>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default RegisterPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}