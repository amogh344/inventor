{"ast":null,"code":"// src/pages/DashboardPage.js\nimport React,{useState,useEffect}from'react';import{Container,Row,Col,Card,Spinner,Alert,Table,Badge}from'react-bootstrap';import{useAuth}from'../context/AuthContext';import{getDashboardStats}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DashboardPage(){const{user}=useAuth();const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchStats=async()=>{try{const response=await getDashboardStats();setStats(response.data);}catch(err){setError('Failed to load dashboard data.');}finally{setLoading(false);}};fetchStats();},[]);if(loading)return/*#__PURE__*/_jsx(Container,{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})});if(error)return/*#__PURE__*/_jsx(Container,{className:\"mt-5\",children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error})});return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome back, \",/*#__PURE__*/_jsx(\"strong\",{children:user.username}),\"!\"]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{className:\"text-center mb-3\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Total Products\"}),/*#__PURE__*/_jsx(Card.Text,{className:\"fs-2\",children:stats===null||stats===void 0?void 0:stats.total_products})]})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{className:\"text-center mb-3\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:\"Low Stock Items\"}),/*#__PURE__*/_jsx(Card.Text,{className:\"fs-2 text-danger\",children:stats===null||stats===void 0?void 0:stats.low_stock_items.length})]})})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mt-5\",children:\"Low Stock Alerts\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,hover:true,className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"In Stock\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Min Level\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(stats===null||stats===void 0?void 0:stats.low_stock_items.length)>0?stats.low_stock_items.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:\"danger\",children:item.stock_quantity})}),/*#__PURE__*/_jsx(\"td\",{children:item.min_stock_level})]},item.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",className:\"text-center\",children:\"No items are low on stock.\"})})})]})})]}),/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mt-5\",children:\"Recent Transactions\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Table,{responsive:true,striped:true,hover:true,className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qty Change\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(stats===null||stats===void 0?void 0:stats.recent_transactions.length)>0?stats.recent_transactions.map(tx=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:tx.product.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Badge,{bg:tx.transaction_type==='Sale'?'danger':'success',children:tx.transaction_type})}),/*#__PURE__*/_jsx(\"td\",{className:tx.quantity_change>0?'text-success':'text-danger',children:tx.quantity_change>0?\"+\".concat(tx.quantity_change):tx.quantity_change})]},tx.id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",className:\"text-center\",children:\"No recent transactions.\"})})})]})})]})]})]});}export default DashboardPage;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Spinner","Alert","Table","Badge","useAuth","getDashboardStats","jsx","_jsx","jsxs","_jsxs","DashboardPage","user","stats","setStats","loading","setLoading","error","setError","fetchStats","response","data","err","className","children","animation","variant","username","md","Body","Title","Text","total_products","low_stock_items","length","responsive","striped","hover","map","item","name","bg","stock_quantity","min_stock_level","id","colSpan","recent_transactions","tx","product","transaction_type","quantity_change","concat"],"sources":["/Users/abr/DAMN/inventory-system/frontend/src/pages/DashboardPage.js"],"sourcesContent":["// src/pages/DashboardPage.js\nimport React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Spinner, Alert, Table, Badge } from 'react-bootstrap';\nimport { useAuth } from '../context/AuthContext';\nimport { getDashboardStats } from '../services/api';\n\nfunction DashboardPage() {\n  const { user } = useAuth();\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        const response = await getDashboardStats();\n        setStats(response.data);\n      } catch (err) {\n        setError('Failed to load dashboard data.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchStats();\n  }, []);\n\n  if (loading) return <Container className=\"text-center mt-5\"><Spinner animation=\"border\" /></Container>;\n  if (error) return <Container className=\"mt-5\"><Alert variant=\"danger\">{error}</Alert></Container>;\n\n  return (\n    <Container>\n      <h1 className=\"my-4\">Dashboard</h1>\n      <p>Welcome back, <strong>{user.username}</strong>!</p>\n      \n      <Row>\n        <Col md={4}><Card className=\"text-center mb-3\"><Card.Body><Card.Title>Total Products</Card.Title><Card.Text className=\"fs-2\">{stats?.total_products}</Card.Text></Card.Body></Card></Col>\n        <Col md={4}><Card className=\"text-center mb-3\"><Card.Body><Card.Title>Low Stock Items</Card.Title><Card.Text className=\"fs-2 text-danger\">{stats?.low_stock_items.length}</Card.Text></Card.Body></Card></Col>\n      </Row>\n\n      <Row>\n        <Col md={6}>\n          <h4 className=\"mt-5\">Low Stock Alerts</h4>\n          <Card>\n            <Table responsive striped hover className=\"mb-0\">\n              <thead><tr><th>Product</th><th>In Stock</th><th>Min Level</th></tr></thead>\n              <tbody>\n                {stats?.low_stock_items.length > 0 ? (\n                  stats.low_stock_items.map(item => (\n                    <tr key={item.id}><td>{item.name}</td><td><Badge bg=\"danger\">{item.stock_quantity}</Badge></td><td>{item.min_stock_level}</td></tr>\n                  ))\n                ) : ( <tr><td colSpan=\"3\" className=\"text-center\">No items are low on stock.</td></tr> )}\n              </tbody>\n            </Table>\n          </Card>\n        </Col>\n        <Col md={6}>\n          <h4 className=\"mt-5\">Recent Transactions</h4>\n          <Card>\n            <Table responsive striped hover className=\"mb-0\">\n              <thead><tr><th>Product</th><th>Type</th><th>Qty Change</th></tr></thead>\n              <tbody>\n                {stats?.recent_transactions.length > 0 ? (\n                  stats.recent_transactions.map(tx => (\n                    <tr key={tx.id}>\n                      <td>{tx.product.name}</td>\n                      <td><Badge bg={tx.transaction_type === 'Sale' ? 'danger' : 'success'}>{tx.transaction_type}</Badge></td>\n                      <td className={tx.quantity_change > 0 ? 'text-success' : 'text-danger'}>\n                        {tx.quantity_change > 0 ? `+${tx.quantity_change}` : tx.quantity_change}\n                      </td>\n                    </tr>\n                  ))\n                ) : ( <tr><td colSpan=\"3\" className=\"text-center\">No recent transactions.</td></tr> )}\n              </tbody>\n            </Table>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default DashboardPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}