{"ast":null,"code":"// src/pages/PurchaseOrdersPage.js\nimport React,{useState,useEffect}from'react';import{Container,Table,Spinner,Alert,Button,Card,Badge}from'react-bootstrap';import{Link}from'react-router-dom';import{getPurchaseOrders,receivePurchaseOrder}from'../services/api';import RoleRequired from'../components/RoleRequired';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PurchaseOrdersPage(){const[purchaseOrders,setPurchaseOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const fetchPurchaseOrders=async()=>{try{setLoading(true);setError('');const response=await getPurchaseOrders();setPurchaseOrders(response.data);}catch(err){setError('Failed to fetch purchase orders.');}finally{setLoading(false);}};useEffect(()=>{fetchPurchaseOrders();},[]);const handleReceiveOrder=async orderId=>{if(window.confirm('Are you sure you want to receive this order? This will add all items to stock.')){try{await receivePurchaseOrder(orderId);fetchPurchaseOrders();// Refresh the list\n}catch(err){setError('Failed to receive order.');}}};if(loading)return/*#__PURE__*/_jsx(Container,{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})});return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center my-4\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Purchase Orders\"}),/*#__PURE__*/_jsx(RoleRequired,{allowedRoles:['Admin','Manager'],children:/*#__PURE__*/_jsx(Button,{as:Link,to:\"/purchase-orders/create\",variant:\"primary\",children:\"Create Purchase Order\"})})]}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",onClose:()=>setError(''),dismissible:true,children:error}),purchaseOrders.length===0&&!loading&&/*#__PURE__*/_jsx(Alert,{variant:\"info\",children:\"No purchase orders found.\"}),purchaseOrders.map(order=>/*#__PURE__*/_jsxs(Card,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Card.Header,{as:\"h5\",className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"PO-\",order.id,\" | Supplier: \",order.supplier.name]}),/*#__PURE__*/_jsx(Badge,{bg:order.status==='Received'?'success':'warning',children:order.status})]}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Order Date:\"}),\" \",new Date(order.order_date).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"h6\",{children:\"Items:\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Unit Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:order.items.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[item.product.name,\" (\",item.product.sku,\")\"]}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",item.unit_price]})]},item.id))})]})]}),/*#__PURE__*/_jsx(Card.Footer,{className:\"text-end\",children:/*#__PURE__*/_jsx(RoleRequired,{allowedRoles:['Admin','Manager'],children:/*#__PURE__*/_jsx(Button,{variant:\"success\",disabled:order.status==='Received',onClick:()=>handleReceiveOrder(order.id),children:order.status==='Received'?'✓ Received':'Mark as Received'})})})]},order.id))]});}export default PurchaseOrdersPage;","map":{"version":3,"names":["React","useState","useEffect","Container","Table","Spinner","Alert","Button","Card","Badge","Link","getPurchaseOrders","receivePurchaseOrder","RoleRequired","jsx","_jsx","jsxs","_jsxs","PurchaseOrdersPage","purchaseOrders","setPurchaseOrders","loading","setLoading","error","setError","fetchPurchaseOrders","response","data","err","handleReceiveOrder","orderId","window","confirm","className","children","animation","allowedRoles","as","to","variant","onClose","dismissible","length","map","order","Header","id","supplier","name","bg","status","Body","Text","Date","order_date","toLocaleDateString","striped","bordered","size","items","item","product","sku","quantity","unit_price","Footer","disabled","onClick"],"sources":["/Users/abr/inventor/frontend/src/pages/PurchaseOrdersPage.js"],"sourcesContent":["// src/pages/PurchaseOrdersPage.js\nimport React, { useState, useEffect } from 'react';\nimport { Container, Table, Spinner, Alert, Button, Card, Badge } from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport { getPurchaseOrders, receivePurchaseOrder } from '../services/api';\nimport RoleRequired from '../components/RoleRequired';\n\nfunction PurchaseOrdersPage() {\n  const [purchaseOrders, setPurchaseOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  const fetchPurchaseOrders = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const response = await getPurchaseOrders();\n      setPurchaseOrders(response.data);\n    } catch (err) {\n      setError('Failed to fetch purchase orders.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => { fetchPurchaseOrders(); }, []);\n\n  const handleReceiveOrder = async (orderId) => {\n    if (window.confirm('Are you sure you want to receive this order? This will add all items to stock.')) {\n        try {\n            await receivePurchaseOrder(orderId);\n            fetchPurchaseOrders(); // Refresh the list\n        } catch (err) {\n            setError('Failed to receive order.');\n        }\n    }\n  };\n\n  if (loading) return <Container className=\"text-center mt-5\"><Spinner animation=\"border\" /></Container>;\n\n  return (\n    <Container>\n      <div className=\"d-flex justify-content-between align-items-center my-4\">\n        <h1>Purchase Orders</h1>\n        <RoleRequired allowedRoles={['Admin', 'Manager']}>\n          <Button as={Link} to=\"/purchase-orders/create\" variant=\"primary\">Create Purchase Order</Button>\n        </RoleRequired>\n      </div>\n      \n      {error && <Alert variant=\"danger\" onClose={() => setError('')} dismissible>{error}</Alert>}\n      {purchaseOrders.length === 0 && !loading && <Alert variant=\"info\">No purchase orders found.</Alert>}\n\n      {purchaseOrders.map((order) => (\n        <Card className=\"mb-3\" key={order.id}>\n          <Card.Header as=\"h5\" className=\"d-flex justify-content-between align-items-center\">\n            <span>PO-{order.id} | Supplier: {order.supplier.name}</span>\n            <Badge bg={order.status === 'Received' ? 'success' : 'warning'}>{order.status}</Badge>\n          </Card.Header>\n          <Card.Body>\n            <Card.Text><strong>Order Date:</strong> {new Date(order.order_date).toLocaleDateString()}</Card.Text>\n            <h6>Items:</h6>\n            <Table striped bordered size=\"sm\">\n              <thead><tr><th>Product</th><th>Quantity</th><th>Unit Price</th></tr></thead>\n              <tbody>\n                {order.items.map((item) => (\n                  <tr key={item.id}>\n                    <td>{item.product.name} ({item.product.sku})</td>\n                    <td>{item.quantity}</td>\n                    <td>${item.unit_price}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </Table>\n          </Card.Body>\n          <Card.Footer className=\"text-end\">\n            <RoleRequired allowedRoles={['Admin', 'Manager']}>\n              <Button \n                  variant=\"success\" \n                  disabled={order.status === 'Received'}\n                  onClick={() => handleReceiveOrder(order.id)}\n              >\n                  {order.status === 'Received' ? '✓ Received' : 'Mark as Received'}\n              </Button>\n            </RoleRequired>\n          </Card.Footer>\n        </Card>\n      ))}\n    </Container>\n  );\n}\n\nexport default PurchaseOrdersPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}