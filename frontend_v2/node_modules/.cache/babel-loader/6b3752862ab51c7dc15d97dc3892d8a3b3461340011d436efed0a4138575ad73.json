{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{Container,Table,Row,Col,Spinner,Alert}from'react-bootstrap';import{getSalesOrders}from'../services/api';import'../components/Invoice.css';// Import our new CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function InvoicePage(){const[order,setOrder]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const{id}=useParams();// Get the order ID from the URL\nuseEffect(()=>{const fetchOrder=async()=>{try{// We fetch all orders and then find the one we need.\n// In a larger app, you would fetch a single order by its ID.\nconst response=await getSalesOrders();const currentOrder=response.data.find(o=>o.id===parseInt(id));if(currentOrder){setOrder(currentOrder);}else{setError('Invoice not found.');}}catch(err){setError('Failed to fetch invoice data.');}finally{setLoading(false);}};fetchOrder();},[id]);if(loading)return/*#__PURE__*/_jsx(Container,{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})});if(error)return/*#__PURE__*/_jsx(Container,{className:\"mt-5\",children:/*#__PURE__*/_jsxs(Alert,{variant:\"danger\",children:[error,\" \",/*#__PURE__*/_jsx(Link,{to:\"/sales-orders\",children:\"Go back\"})]})});if(!order)return null;// --- Calculation Logic ---\nconst subtotal=order.items.reduce((acc,item)=>acc+item.quantity*item.unit_price,0);const taxRate=0.08;const tax=subtotal*taxRate;const total=subtotal+tax;return(/*#__PURE__*/// We apply our special class here\n_jsxs(\"div\",{className:\"invoice-container\",children:[/*#__PURE__*/_jsxs(Row,{className:\"mb-4 align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-0\",children:\"INVOICE\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Your Company Name\"})]}),/*#__PURE__*/_jsxs(Col,{className:\"text-end\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Order #:\"}),\" SO-\",order.id]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(order.order_date).toLocaleDateString()]})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Row,{className:\"mb-4\",children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Bill To:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:order.customer_name||'Valued Customer'})]})}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"SKU\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Unit Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:order.items.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.product.name}),/*#__PURE__*/_jsx(\"td\",{children:item.product.sku}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",parseFloat(item.unit_price).toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",(item.quantity*item.unit_price).toFixed(2)]})]},item.id))})]}),/*#__PURE__*/_jsx(Row,{className:\"mt-4 justify-content-end\",children:/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Table,{borderless:true,size:\"sm\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Subtotal:\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"\\u20B9\",subtotal.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Tax (\",(taxRate*100).toFixed(0),\"%):\"]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-end\",children:[\"\\u20B9\",tax.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"border-top\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"pt-2\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Total:\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end pt-2\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9\",total.toFixed(2)]})})]})]})})})})]}));}export default InvoicePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","Container","Table","Row","Col","Spinner","Alert","getSalesOrders","jsx","_jsx","jsxs","_jsxs","InvoicePage","order","setOrder","loading","setLoading","error","setError","id","fetchOrder","response","currentOrder","data","find","o","parseInt","err","className","children","animation","variant","to","subtotal","items","reduce","acc","item","quantity","unit_price","taxRate","tax","total","Date","order_date","toLocaleDateString","customer_name","striped","bordered","hover","map","product","name","sku","parseFloat","toFixed","md","borderless","size"],"sources":["/Users/abr/inventor/frontend/src/pages/InvoicePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { Container, Table, Row, Col, Spinner, Alert } from 'react-bootstrap';\nimport { getSalesOrders } from '../services/api';\nimport '../components/Invoice.css'; // Import our new CSS file\n\nfunction InvoicePage() {\n  const [order, setOrder] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const { id } = useParams(); // Get the order ID from the URL\n\n  useEffect(() => {\n    const fetchOrder = async () => {\n      try {\n        // We fetch all orders and then find the one we need.\n        // In a larger app, you would fetch a single order by its ID.\n        const response = await getSalesOrders();\n        const currentOrder = response.data.find(o => o.id === parseInt(id));\n        if (currentOrder) {\n          setOrder(currentOrder);\n        } else {\n          setError('Invoice not found.');\n        }\n      } catch (err) {\n        setError('Failed to fetch invoice data.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchOrder();\n  }, [id]);\n\n  if (loading) return <Container className=\"text-center mt-5\"><Spinner animation=\"border\" /></Container>;\n  if (error) return <Container className=\"mt-5\"><Alert variant=\"danger\">{error} <Link to=\"/sales-orders\">Go back</Link></Alert></Container>;\n  if (!order) return null;\n\n  // --- Calculation Logic ---\n  const subtotal = order.items.reduce((acc, item) => acc + (item.quantity * item.unit_price), 0);\n  const taxRate = 0.08;\n  const tax = subtotal * taxRate;\n  const total = subtotal + tax;\n\n  return (\n    // We apply our special class here\n    <div className=\"invoice-container\">\n      <Row className=\"mb-4 align-items-center\">\n        <Col><h1 className=\"mb-0\">INVOICE</h1><p className=\"text-muted\">Your Company Name</p></Col>\n        <Col className=\"text-end\"><p className=\"mb-0\"><strong>Order #:</strong> SO-{order.id}</p><p className=\"mb-0\"><strong>Date:</strong> {new Date(order.order_date).toLocaleDateString()}</p></Col>\n      </Row>\n      <hr />\n      <Row className=\"mb-4\"><Col><strong>Bill To:</strong><p className=\"mb-0\">{order.customer_name || 'Valued Customer'}</p></Col></Row>\n      <Table striped bordered hover>\n        <thead><tr><th>Product</th><th>SKU</th><th>Quantity</th><th>Unit Price</th><th>Total</th></tr></thead>\n        <tbody>\n          {order.items.map((item) => (\n            <tr key={item.id}>\n              <td>{item.product.name}</td><td>{item.product.sku}</td><td>{item.quantity}</td>\n              <td>₹{parseFloat(item.unit_price).toFixed(2)}</td>\n              <td>₹{(item.quantity * item.unit_price).toFixed(2)}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n      <Row className=\"mt-4 justify-content-end\">\n        <Col md={4}>\n          <Table borderless size=\"sm\">\n            <tbody>\n              <tr><td><strong>Subtotal:</strong></td><td className=\"text-end\">₹{subtotal.toFixed(2)}</td></tr>\n              <tr><td><strong>Tax ({(taxRate * 100).toFixed(0)}%):</strong></td><td className=\"text-end\">₹{tax.toFixed(2)}</td></tr>\n              <tr className=\"border-top\"><td className=\"pt-2\"><strong>Total:</strong></td><td className=\"text-end pt-2\"><strong>₹{total.toFixed(2)}</strong></td></tr>\n            </tbody>\n          </Table>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n\nexport default InvoicePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}