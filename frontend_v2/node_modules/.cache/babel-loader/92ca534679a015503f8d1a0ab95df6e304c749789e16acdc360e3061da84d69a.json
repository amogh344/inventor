{"ast":null,"code":"var _jsxFileName = \"/Users/abr/inventor/frontend_v2/src/pages/ProductsPage.js\",\n  _s = $RefreshSig$();\n// // frontend_v2/src/pages/ProductsPage.js\n\n// import React, { useState, useEffect, useCallback } from 'react';\n// import {\n//   Container,\n//   Table,\n//   Spinner,\n//   Alert,\n//   Button,\n//   Card,\n//   ButtonGroup,\n//   Badge,\n//   InputGroup,\n//   FormControl,\n// } from 'react-bootstrap';\n// import { useToast } from '../components/ui/ToastProvider';\n// import { getProducts, createProduct, updateProduct, patchProduct } from '../services/api';\n// import ProductFormModal from '../components/ProductFormModal';\n// import RoleRequired from '../components/RoleRequired';\n// import SortDropdown from '../components/ui/SortDropdown';\n// import EmptyState from '../components/ui/EmptyState';\n\n// function ProductsPage() {\n//   const [products, setProducts] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState('');\n//   const [showModal, setShowModal] = useState(false);\n//   const [selectedProduct, setSelectedProduct] = useState(null);\n//   const { showToast } = useToast();\n\n//   const [search, setSearch] = useState('');\n//   const [sortOrder, setSortOrder] = useState('-id');\n\n//   const sortOptions = [\n//     { value: '-id', label: 'Most Recent' },\n//     { value: 'name', label: 'Name (A-Z)' },\n//     { value: '-name', label: 'Name (Z-A)' },\n//     { value: '-stock_quantity', label: 'Stock (High-Low)' },\n//     { value: 'stock_quantity', label: 'Stock (Low-High)' },\n//   ];\n\n//   const fetchProducts = useCallback(async () => {\n//     try {\n//       setLoading(true);\n//       const params = { ordering: sortOrder, search };\n//       const response = await getProducts(params);\n//       setProducts(response.data);\n//       setError('');\n//     } catch (err) {\n//       setError('Failed to fetch products.');\n//       console.error(err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   }, [sortOrder, search]);\n\n//   useEffect(() => {\n//     fetchProducts();\n//   }, [fetchProducts]);\n\n//   const handleShowCreateModal = () => {\n//     setSelectedProduct(null);\n//     setShowModal(true);\n//   };\n\n//   const handleShowEditModal = (product) => {\n//     setSelectedProduct(product);\n//     setShowModal(true);\n//   };\n\n//   const handleCloseModal = () => {\n//     setShowModal(false);\n//     setSelectedProduct(null);\n//   };\n\n//   const handleSave = async (formData) => {\n//     try {\n//       if (selectedProduct) {\n//         await updateProduct(selectedProduct.id, formData);\n//         showToast({ variant: 'success', message: 'Product updated' });\n//       } else {\n//         await createProduct(formData);\n//         showToast({ variant: 'success', message: 'Product created' });\n//       }\n//       fetchProducts();\n//       handleCloseModal();\n//     } catch (err) {\n//       setError(selectedProduct ? 'Failed to update product.' : 'Failed to create product.');\n//       showToast({ variant: 'danger', message: 'Action failed' });\n//     }\n//   };\n\n//   const handleArchive = async (id) => {\n//     if (\n//       window.confirm(\n//         'Are you sure you want to archive this product? It will be hidden from lists and new orders.'\n//       )\n//     ) {\n//       try {\n//         await patchProduct(id, { is_active: false });\n//         showToast({ variant: 'success', message: 'Product archived successfully' });\n//         fetchProducts();\n//       } catch (err) {\n//         const errorMessage = err.response?.data?.detail || 'Failed to archive product.';\n//         setError(errorMessage);\n//         showToast({ variant: 'danger', message: 'Action failed' });\n//       }\n//     }\n//   };\n\n//   if (loading) {\n//     return (\n//       <Container className=\"text-center mt-5\">\n//         <Spinner animation=\"border\" />\n//       </Container>\n//     );\n//   }\n\n//   return (\n//     <Container className=\"my-4\">\n//       <Card className=\"shadow-sm border-0\">\n//         {/* HEADER */}\n//         <Card.Header className=\"bg-white border-0 pb-0\">\n//           <div className=\"row align-items-center g-3\">\n//             {/* Left: Title */}\n//             <div className=\"col-md-3 text-md-start text-center\">\n//               <h3 className=\"mb-0 fw-semibold text-primary\">\n//                 <i className=\"bi bi-box-seam me-2\" /> Products\n//               </h3>\n//             </div>\n\n//             {/* Middle: Search bar */}\n//             <div className=\"col-md-4\">\n//               <InputGroup>\n//                 <InputGroup.Text className=\"bg-white border-end-0\">\n//                   <i className=\"bi bi-search text-muted\" />\n//                 </InputGroup.Text>\n//                 <FormControl\n//                   placeholder=\"Search products...\"\n//                   value={search}\n//                   onChange={(e) => setSearch(e.target.value)}\n//                   className=\"border-start-0 rounded-end-pill\"\n//                 />\n//               </InputGroup>\n//             </div>\n\n//             {/* Right: Sort + Create */}\n//             <div className=\"col-md-5 d-flex justify-content-md-end justify-content-center gap-2\">\n//               <SortDropdown options={sortOptions} value={sortOrder} onChange={setSortOrder} />\n//               <RoleRequired allowedRoles={['Admin', 'Manager']}>\n//                 <Button\n//                   variant=\"primary\"\n//                   onClick={handleShowCreateModal}\n//                   className=\"rounded-pill shadow-sm px-3 py-2 d-flex align-items-center\"\n//                 >\n//                   <i className=\"bi bi-plus-lg me-2\" /> Create\n//                 </Button>\n//               </RoleRequired>\n//             </div>\n//           </div>\n//         </Card.Header>\n\n//         {/* BODY */}\n//         <Card.Body>\n//           {error && <Alert variant=\"danger\" className=\"mb-3\">{error}</Alert>}\n\n//           {!loading && products.length === 0 ? (\n//             <EmptyState\n//               title=\"No products found\"\n//               description=\"Try adjusting your search or create a new product.\"\n//               action={\n//                 <RoleRequired allowedRoles={['Admin', 'Manager']}>\n//                   <Button\n//                     variant=\"primary\"\n//                     onClick={handleShowCreateModal}\n//                     className=\"rounded-pill shadow-sm px-3 py-2\"\n//                   >\n//                     <i className=\"bi bi-plus-lg me-2\" /> Create Product\n//                   </Button>\n//                 </RoleRequired>\n//               }\n//             />\n//           ) : (\n//             <Table\n//               hover\n//               responsive\n//               className=\"align-middle mt-3 border rounded overflow-hidden shadow-sm\"\n//             >\n//               <thead className=\"table-light\">\n//                 <tr>\n//                   <th>SKU</th>\n//                   <th>Name</th>\n//                   <th>Stock</th>\n//                   <RoleRequired allowedRoles={['Admin', 'Manager']}>\n//                     <th className=\"text-center\">Actions</th>\n//                   </RoleRequired>\n//                 </tr>\n//               </thead>\n//               <tbody>\n//                 {products\n//                   .filter((p) =>\n//                     [p.sku, p.name].join(' ').toLowerCase().includes(search.toLowerCase())\n//                   )\n//                   .map((product) => (\n//                     <tr key={product.id}>\n//                       <td className=\"fw-medium\">{product.sku}</td>\n//                       <td>{product.name}</td>\n//                       <td>\n//                         {product.stock_quantity > 0 ? (\n//                           <Badge bg=\"success\" pill>\n//                             {product.stock_quantity} in stock\n//                           </Badge>\n//                         ) : (\n//                           <Badge bg=\"danger\" pill>\n//                             Out of stock\n//                           </Badge>\n//                         )}\n//                       </td>\n//                       <RoleRequired allowedRoles={['Admin', 'Manager']}>\n//                         <td className=\"text-center\">\n//                           <ButtonGroup size=\"sm\">\n//                             <Button\n//                               variant=\"outline-secondary\"\n//                               onClick={() => handleShowEditModal(product)}\n//                               title=\"Edit product\"\n//                             >\n//                               <i className=\"bi bi-pencil\" />\n//                             </Button>\n//                             <Button\n//                               variant=\"outline-danger\"\n//                               onClick={() => handleArchive(product.id)}\n//                               title=\"Archive product\"\n//                             >\n//                               <i className=\"bi bi-archive\" />\n//                             </Button>\n//                           </ButtonGroup>\n//                         </td>\n//                       </RoleRequired>\n//                     </tr>\n//                   ))}\n//               </tbody>\n//             </Table>\n//           )}\n//         </Card.Body>\n//       </Card>\n\n//       {/* MODAL */}\n//       <ProductFormModal\n//         show={showModal}\n//         handleClose={handleCloseModal}\n//         product={selectedProduct}\n//         onSave={handleSave}\n//       />\n//     </Container>\n//   );\n// }\n\n// export default ProductsPage;\n\n// frontend_v2/src/pages/ProductsPage.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Box, Card, CardContent, CardHeader, Typography, TextField, InputAdornment, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Chip, Button, Stack, Alert, CircularProgress } from '@mui/material';\nimport { Search as SearchIcon, Add as AddIcon, Edit as EditIcon, Archive as ArchiveIcon, Inventory as InventoryIcon } from '@mui/icons-material';\nimport { useToast } from '../components/ui/ToastProvider';\nimport { getProducts, createProduct, updateProduct, patchProduct } from '../services/api';\nimport ProductFormModal from '../components/ProductFormModal';\nimport RoleRequired from '../components/RoleRequired';\nimport SortDropdown from '../components/ui/SortDropdown';\nimport EmptyState from '../components/ui/EmptyState';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductsPage() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const {\n    showToast\n  } = useToast();\n  const [search, setSearch] = useState('');\n  const [sortOrder, setSortOrder] = useState('-id');\n  const sortOptions = [{\n    value: '-id',\n    label: 'Most Recent'\n  }, {\n    value: 'name',\n    label: 'Name (A-Z)'\n  }, {\n    value: '-name',\n    label: 'Name (Z-A)'\n  }, {\n    value: '-stock_quantity',\n    label: 'Stock (High-Low)'\n  }, {\n    value: 'stock_quantity',\n    label: 'Stock (Low-High)'\n  }];\n  const fetchProducts = useCallback(async () => {\n    try {\n      setLoading(true);\n      const params = {\n        ordering: sortOrder,\n        search\n      };\n      const response = await getProducts(params);\n      setProducts(response.data);\n      setError('');\n    } catch (err) {\n      setError('Failed to fetch products.');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  }, [sortOrder, search]);\n  useEffect(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n  const handleShowCreateModal = () => {\n    setSelectedProduct(null);\n    setShowModal(true);\n  };\n  const handleShowEditModal = product => {\n    setSelectedProduct(product);\n    setShowModal(true);\n  };\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setSelectedProduct(null);\n  };\n  const handleSave = async formData => {\n    try {\n      if (selectedProduct) {\n        await updateProduct(selectedProduct.id, formData);\n        showToast({\n          variant: 'success',\n          message: 'Product updated'\n        });\n      } else {\n        await createProduct(formData);\n        showToast({\n          variant: 'success',\n          message: 'Product created'\n        });\n      }\n      fetchProducts();\n      handleCloseModal();\n    } catch (err) {\n      setError(selectedProduct ? 'Failed to update product.' : 'Failed to create product.');\n      showToast({\n        variant: 'danger',\n        message: 'Action failed'\n      });\n    }\n  };\n  const handleArchive = async id => {\n    if (window.confirm('Are you sure you want to archive this product? It will be hidden from lists and new orders.')) {\n      try {\n        await patchProduct(id, {\n          is_active: false\n        });\n        showToast({\n          variant: 'success',\n          message: 'Product archived successfully'\n        });\n        fetchProducts();\n      } catch (err) {\n        var _err$response, _err$response$data;\n        const errorMessage = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'Failed to archive product.';\n        setError(errorMessage);\n        showToast({\n          variant: 'danger',\n          message: 'Action failed'\n        });\n      }\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      mt: 5,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      my: 4,\n      px: 2\n    },\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      elevation: 3,\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        title: /*#__PURE__*/_jsxDEV(Box, {\n          display: \"flex\",\n          flexDirection: {\n            xs: 'column',\n            md: 'row'\n          },\n          alignItems: {\n            xs: 'stretch',\n            md: 'center'\n          },\n          justifyContent: \"space-between\",\n          gap: 2,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            fontWeight: 600,\n            color: \"primary\",\n            display: \"flex\",\n            alignItems: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(InventoryIcon, {\n              sx: {\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this), \" Products\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            size: \"small\",\n            placeholder: \"Search products...\",\n            value: search,\n            onChange: e => setSearch(e.target.value),\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(SearchIcon, {\n                  color: \"action\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 21\n              }, this)\n            },\n            sx: {\n              width: {\n                xs: '100%',\n                md: 300\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Stack, {\n            direction: \"row\",\n            spacing: 1,\n            justifyContent: {\n              xs: 'flex-start',\n              md: 'flex-end'\n            },\n            children: [/*#__PURE__*/_jsxDEV(SortDropdown, {\n              options: sortOptions,\n              value: sortOrder,\n              onChange: setSortOrder\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(RoleRequired, {\n              allowedRoles: ['Admin', 'Manager'],\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 32\n                }, this),\n                onClick: handleShowCreateModal,\n                sx: {\n                  borderRadius: '50px',\n                  px: 3\n                },\n                children: \"Create\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }, this),\n        sx: {\n          pb: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          sx: {\n            mb: 2\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 21\n        }, this), !loading && products.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n          title: \"No products found\",\n          description: \"Try adjusting your search or create a new product.\",\n          action: /*#__PURE__*/_jsxDEV(RoleRequired, {\n            allowedRoles: ['Admin', 'Manager'],\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 32\n              }, this),\n              onClick: handleShowCreateModal,\n              sx: {\n                borderRadius: '50px',\n                px: 3\n              },\n              children: \"Create Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(TableContainer, {\n          component: Paper,\n          sx: {\n            mt: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            children: [/*#__PURE__*/_jsxDEV(TableHead, {\n              children: /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"SKU\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 456,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Stock\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(RoleRequired, {\n                  allowedRoles: ['Admin', 'Manager'],\n                  children: /*#__PURE__*/_jsxDEV(TableCell, {\n                    align: \"center\",\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 459,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n              children: products.filter(p => [p.sku, p.name].join(' ').toLowerCase().includes(search.toLowerCase())).map(product => /*#__PURE__*/_jsxDEV(TableRow, {\n                hover: true,\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    fontWeight: 500\n                  },\n                  children: product.sku\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: product.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: product.stock_quantity > 0 ? /*#__PURE__*/_jsxDEV(Chip, {\n                    label: `${product.stock_quantity} in stock`,\n                    color: \"success\",\n                    size: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 474,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(Chip, {\n                    label: \"Out of stock\",\n                    color: \"error\",\n                    size: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 472,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(RoleRequired, {\n                  allowedRoles: ['Admin', 'Manager'],\n                  children: /*#__PURE__*/_jsxDEV(TableCell, {\n                    align: \"center\",\n                    children: /*#__PURE__*/_jsxDEV(Stack, {\n                      direction: \"row\",\n                      spacing: 1,\n                      justifyContent: \"center\",\n                      children: [/*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"outlined\",\n                        size: \"small\",\n                        startIcon: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 482,\n                          columnNumber: 82\n                        }, this),\n                        onClick: () => handleShowEditModal(product),\n                        children: \"Edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 482,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"outlined\",\n                        color: \"error\",\n                        size: \"small\",\n                        startIcon: /*#__PURE__*/_jsxDEV(ArchiveIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 485,\n                          columnNumber: 96\n                        }, this),\n                        onClick: () => handleArchive(product.id),\n                        children: \"Archive\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 485,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 481,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 480,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 479,\n                  columnNumber: 25\n                }, this)]\n              }, product.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductFormModal, {\n      show: showModal,\n      handleClose: handleCloseModal,\n      product: selectedProduct,\n      onSave: handleSave\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 385,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductsPage, \"Pyfi361t7JVv4VUVqw1mfz+BYW8=\", false, function () {\n  return [useToast];\n});\n_c = ProductsPage;\nexport default ProductsPage;\nvar _c;\n$RefreshReg$(_c, \"ProductsPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Box","Card","CardContent","CardHeader","Typography","TextField","InputAdornment","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Chip","Button","Stack","Alert","CircularProgress","Search","SearchIcon","Add","AddIcon","Edit","EditIcon","Archive","ArchiveIcon","Inventory","InventoryIcon","useToast","getProducts","createProduct","updateProduct","patchProduct","ProductFormModal","RoleRequired","SortDropdown","EmptyState","jsxDEV","_jsxDEV","ProductsPage","_s","products","setProducts","loading","setLoading","error","setError","showModal","setShowModal","selectedProduct","setSelectedProduct","showToast","search","setSearch","sortOrder","setSortOrder","sortOptions","value","label","fetchProducts","params","ordering","response","data","err","console","handleShowCreateModal","handleShowEditModal","product","handleCloseModal","handleSave","formData","id","variant","message","handleArchive","window","confirm","is_active","_err$response","_err$response$data","errorMessage","detail","display","justifyContent","mt","children","fileName","_jsxFileName","lineNumber","columnNumber","sx","my","px","elevation","title","flexDirection","xs","md","alignItems","gap","fontWeight","color","mr","size","placeholder","onChange","e","target","InputProps","startAdornment","position","width","direction","spacing","options","allowedRoles","startIcon","onClick","borderRadius","pb","severity","mb","length","description","action","component","align","filter","p","sku","name","join","toLowerCase","includes","map","hover","stock_quantity","show","handleClose","onSave","_c","$RefreshReg$"],"sources":["/Users/abr/inventor/frontend_v2/src/pages/ProductsPage.js"],"sourcesContent":["// // frontend_v2/src/pages/ProductsPage.js\n\n// import React, { useState, useEffect, useCallback } from 'react';\n// import {\n//   Container,\n//   Table,\n//   Spinner,\n//   Alert,\n//   Button,\n//   Card,\n//   ButtonGroup,\n//   Badge,\n//   InputGroup,\n//   FormControl,\n// } from 'react-bootstrap';\n// import { useToast } from '../components/ui/ToastProvider';\n// import { getProducts, createProduct, updateProduct, patchProduct } from '../services/api';\n// import ProductFormModal from '../components/ProductFormModal';\n// import RoleRequired from '../components/RoleRequired';\n// import SortDropdown from '../components/ui/SortDropdown';\n// import EmptyState from '../components/ui/EmptyState';\n\n// function ProductsPage() {\n//   const [products, setProducts] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState('');\n//   const [showModal, setShowModal] = useState(false);\n//   const [selectedProduct, setSelectedProduct] = useState(null);\n//   const { showToast } = useToast();\n\n//   const [search, setSearch] = useState('');\n//   const [sortOrder, setSortOrder] = useState('-id');\n\n//   const sortOptions = [\n//     { value: '-id', label: 'Most Recent' },\n//     { value: 'name', label: 'Name (A-Z)' },\n//     { value: '-name', label: 'Name (Z-A)' },\n//     { value: '-stock_quantity', label: 'Stock (High-Low)' },\n//     { value: 'stock_quantity', label: 'Stock (Low-High)' },\n//   ];\n\n//   const fetchProducts = useCallback(async () => {\n//     try {\n//       setLoading(true);\n//       const params = { ordering: sortOrder, search };\n//       const response = await getProducts(params);\n//       setProducts(response.data);\n//       setError('');\n//     } catch (err) {\n//       setError('Failed to fetch products.');\n//       console.error(err);\n//     } finally {\n//       setLoading(false);\n//     }\n//   }, [sortOrder, search]);\n\n//   useEffect(() => {\n//     fetchProducts();\n//   }, [fetchProducts]);\n\n//   const handleShowCreateModal = () => {\n//     setSelectedProduct(null);\n//     setShowModal(true);\n//   };\n\n//   const handleShowEditModal = (product) => {\n//     setSelectedProduct(product);\n//     setShowModal(true);\n//   };\n\n//   const handleCloseModal = () => {\n//     setShowModal(false);\n//     setSelectedProduct(null);\n//   };\n\n//   const handleSave = async (formData) => {\n//     try {\n//       if (selectedProduct) {\n//         await updateProduct(selectedProduct.id, formData);\n//         showToast({ variant: 'success', message: 'Product updated' });\n//       } else {\n//         await createProduct(formData);\n//         showToast({ variant: 'success', message: 'Product created' });\n//       }\n//       fetchProducts();\n//       handleCloseModal();\n//     } catch (err) {\n//       setError(selectedProduct ? 'Failed to update product.' : 'Failed to create product.');\n//       showToast({ variant: 'danger', message: 'Action failed' });\n//     }\n//   };\n\n//   const handleArchive = async (id) => {\n//     if (\n//       window.confirm(\n//         'Are you sure you want to archive this product? It will be hidden from lists and new orders.'\n//       )\n//     ) {\n//       try {\n//         await patchProduct(id, { is_active: false });\n//         showToast({ variant: 'success', message: 'Product archived successfully' });\n//         fetchProducts();\n//       } catch (err) {\n//         const errorMessage = err.response?.data?.detail || 'Failed to archive product.';\n//         setError(errorMessage);\n//         showToast({ variant: 'danger', message: 'Action failed' });\n//       }\n//     }\n//   };\n\n//   if (loading) {\n//     return (\n//       <Container className=\"text-center mt-5\">\n//         <Spinner animation=\"border\" />\n//       </Container>\n//     );\n//   }\n\n//   return (\n//     <Container className=\"my-4\">\n//       <Card className=\"shadow-sm border-0\">\n//         {/* HEADER */}\n//         <Card.Header className=\"bg-white border-0 pb-0\">\n//           <div className=\"row align-items-center g-3\">\n//             {/* Left: Title */}\n//             <div className=\"col-md-3 text-md-start text-center\">\n//               <h3 className=\"mb-0 fw-semibold text-primary\">\n//                 <i className=\"bi bi-box-seam me-2\" /> Products\n//               </h3>\n//             </div>\n\n//             {/* Middle: Search bar */}\n//             <div className=\"col-md-4\">\n//               <InputGroup>\n//                 <InputGroup.Text className=\"bg-white border-end-0\">\n//                   <i className=\"bi bi-search text-muted\" />\n//                 </InputGroup.Text>\n//                 <FormControl\n//                   placeholder=\"Search products...\"\n//                   value={search}\n//                   onChange={(e) => setSearch(e.target.value)}\n//                   className=\"border-start-0 rounded-end-pill\"\n//                 />\n//               </InputGroup>\n//             </div>\n\n//             {/* Right: Sort + Create */}\n//             <div className=\"col-md-5 d-flex justify-content-md-end justify-content-center gap-2\">\n//               <SortDropdown options={sortOptions} value={sortOrder} onChange={setSortOrder} />\n//               <RoleRequired allowedRoles={['Admin', 'Manager']}>\n//                 <Button\n//                   variant=\"primary\"\n//                   onClick={handleShowCreateModal}\n//                   className=\"rounded-pill shadow-sm px-3 py-2 d-flex align-items-center\"\n//                 >\n//                   <i className=\"bi bi-plus-lg me-2\" /> Create\n//                 </Button>\n//               </RoleRequired>\n//             </div>\n//           </div>\n//         </Card.Header>\n\n//         {/* BODY */}\n//         <Card.Body>\n//           {error && <Alert variant=\"danger\" className=\"mb-3\">{error}</Alert>}\n\n//           {!loading && products.length === 0 ? (\n//             <EmptyState\n//               title=\"No products found\"\n//               description=\"Try adjusting your search or create a new product.\"\n//               action={\n//                 <RoleRequired allowedRoles={['Admin', 'Manager']}>\n//                   <Button\n//                     variant=\"primary\"\n//                     onClick={handleShowCreateModal}\n//                     className=\"rounded-pill shadow-sm px-3 py-2\"\n//                   >\n//                     <i className=\"bi bi-plus-lg me-2\" /> Create Product\n//                   </Button>\n//                 </RoleRequired>\n//               }\n//             />\n//           ) : (\n//             <Table\n//               hover\n//               responsive\n//               className=\"align-middle mt-3 border rounded overflow-hidden shadow-sm\"\n//             >\n//               <thead className=\"table-light\">\n//                 <tr>\n//                   <th>SKU</th>\n//                   <th>Name</th>\n//                   <th>Stock</th>\n//                   <RoleRequired allowedRoles={['Admin', 'Manager']}>\n//                     <th className=\"text-center\">Actions</th>\n//                   </RoleRequired>\n//                 </tr>\n//               </thead>\n//               <tbody>\n//                 {products\n//                   .filter((p) =>\n//                     [p.sku, p.name].join(' ').toLowerCase().includes(search.toLowerCase())\n//                   )\n//                   .map((product) => (\n//                     <tr key={product.id}>\n//                       <td className=\"fw-medium\">{product.sku}</td>\n//                       <td>{product.name}</td>\n//                       <td>\n//                         {product.stock_quantity > 0 ? (\n//                           <Badge bg=\"success\" pill>\n//                             {product.stock_quantity} in stock\n//                           </Badge>\n//                         ) : (\n//                           <Badge bg=\"danger\" pill>\n//                             Out of stock\n//                           </Badge>\n//                         )}\n//                       </td>\n//                       <RoleRequired allowedRoles={['Admin', 'Manager']}>\n//                         <td className=\"text-center\">\n//                           <ButtonGroup size=\"sm\">\n//                             <Button\n//                               variant=\"outline-secondary\"\n//                               onClick={() => handleShowEditModal(product)}\n//                               title=\"Edit product\"\n//                             >\n//                               <i className=\"bi bi-pencil\" />\n//                             </Button>\n//                             <Button\n//                               variant=\"outline-danger\"\n//                               onClick={() => handleArchive(product.id)}\n//                               title=\"Archive product\"\n//                             >\n//                               <i className=\"bi bi-archive\" />\n//                             </Button>\n//                           </ButtonGroup>\n//                         </td>\n//                       </RoleRequired>\n//                     </tr>\n//                   ))}\n//               </tbody>\n//             </Table>\n//           )}\n//         </Card.Body>\n//       </Card>\n\n//       {/* MODAL */}\n//       <ProductFormModal\n//         show={showModal}\n//         handleClose={handleCloseModal}\n//         product={selectedProduct}\n//         onSave={handleSave}\n//       />\n//     </Container>\n//   );\n// }\n\n// export default ProductsPage;\n\n\n// frontend_v2/src/pages/ProductsPage.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport {\n  Box,\n  Card,\n  CardContent,\n  CardHeader,\n  Typography,\n  TextField,\n  InputAdornment,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Chip,\n  Button,\n  Stack,\n  Alert,\n  CircularProgress\n} from '@mui/material';\nimport { Search as SearchIcon, Add as AddIcon, Edit as EditIcon, Archive as ArchiveIcon, Inventory as InventoryIcon } from '@mui/icons-material';\nimport { useToast } from '../components/ui/ToastProvider';\nimport { getProducts, createProduct, updateProduct, patchProduct } from '../services/api';\nimport ProductFormModal from '../components/ProductFormModal';\nimport RoleRequired from '../components/RoleRequired';\nimport SortDropdown from '../components/ui/SortDropdown';\nimport EmptyState from '../components/ui/EmptyState';\n\nfunction ProductsPage() {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const { showToast } = useToast();\n\n  const [search, setSearch] = useState('');\n  const [sortOrder, setSortOrder] = useState('-id');\n\n  const sortOptions = [\n    { value: '-id', label: 'Most Recent' },\n    { value: 'name', label: 'Name (A-Z)' },\n    { value: '-name', label: 'Name (Z-A)' },\n    { value: '-stock_quantity', label: 'Stock (High-Low)' },\n    { value: 'stock_quantity', label: 'Stock (Low-High)' },\n  ];\n\n  const fetchProducts = useCallback(async () => {\n    try {\n      setLoading(true);\n      const params = { ordering: sortOrder, search };\n      const response = await getProducts(params);\n      setProducts(response.data);\n      setError('');\n    } catch (err) {\n      setError('Failed to fetch products.');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  }, [sortOrder, search]);\n\n  useEffect(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n\n  const handleShowCreateModal = () => {\n    setSelectedProduct(null);\n    setShowModal(true);\n  };\n\n  const handleShowEditModal = (product) => {\n    setSelectedProduct(product);\n    setShowModal(true);\n  };\n\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setSelectedProduct(null);\n  };\n\n  const handleSave = async (formData) => {\n    try {\n      if (selectedProduct) {\n        await updateProduct(selectedProduct.id, formData);\n        showToast({ variant: 'success', message: 'Product updated' });\n      } else {\n        await createProduct(formData);\n        showToast({ variant: 'success', message: 'Product created' });\n      }\n      fetchProducts();\n      handleCloseModal();\n    } catch (err) {\n      setError(selectedProduct ? 'Failed to update product.' : 'Failed to create product.');\n      showToast({ variant: 'danger', message: 'Action failed' });\n    }\n  };\n\n  const handleArchive = async (id) => {\n    if (window.confirm('Are you sure you want to archive this product? It will be hidden from lists and new orders.')) {\n      try {\n        await patchProduct(id, { is_active: false });\n        showToast({ variant: 'success', message: 'Product archived successfully' });\n        fetchProducts();\n      } catch (err) {\n        const errorMessage = err.response?.data?.detail || 'Failed to archive product.';\n        setError(errorMessage);\n        showToast({ variant: 'danger', message: 'Action failed' });\n      }\n    }\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" mt={5}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ my: 4, px: 2 }}>\n      <Card elevation={3}>\n        <CardHeader\n          title={\n            <Box display=\"flex\" flexDirection={{ xs: 'column', md: 'row' }} alignItems={{ xs: 'stretch', md: 'center' }} justifyContent=\"space-between\" gap={2}>\n              {/* Left: Title */}\n              <Typography variant=\"h5\" fontWeight={600} color=\"primary\" display=\"flex\" alignItems=\"center\">\n                <InventoryIcon sx={{ mr: 1 }} /> Products\n              </Typography>\n\n              {/* Middle: Search */}\n              <TextField\n                size=\"small\"\n                placeholder=\"Search products...\"\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <SearchIcon color=\"action\" />\n                    </InputAdornment>\n                  ),\n                }}\n                sx={{ width: { xs: '100%', md: 300 } }}\n              />\n\n              {/* Right: Sort + Create */}\n              <Stack direction=\"row\" spacing={1} justifyContent={{ xs: 'flex-start', md: 'flex-end' }}>\n                <SortDropdown options={sortOptions} value={sortOrder} onChange={setSortOrder} />\n                <RoleRequired allowedRoles={['Admin', 'Manager']}>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<AddIcon />}\n                    onClick={handleShowCreateModal}\n                    sx={{ borderRadius: '50px', px: 3 }}\n                  >\n                    Create\n                  </Button>\n                </RoleRequired>\n              </Stack>\n            </Box>\n          }\n          sx={{ pb: 0 }}\n        />\n\n        <CardContent>\n          {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\n\n          {!loading && products.length === 0 ? (\n            <EmptyState\n              title=\"No products found\"\n              description=\"Try adjusting your search or create a new product.\"\n              action={\n                <RoleRequired allowedRoles={['Admin', 'Manager']}>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<AddIcon />}\n                    onClick={handleShowCreateModal}\n                    sx={{ borderRadius: '50px', px: 3 }}\n                  >\n                    Create Product\n                  </Button>\n                </RoleRequired>\n              }\n            />\n          ) : (\n            <TableContainer component={Paper} sx={{ mt: 2 }}>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>SKU</TableCell>\n                    <TableCell>Name</TableCell>\n                    <TableCell>Stock</TableCell>\n                    <RoleRequired allowedRoles={['Admin', 'Manager']}>\n                      <TableCell align=\"center\">Actions</TableCell>\n                    </RoleRequired>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {products\n                    .filter((p) =>\n                      [p.sku, p.name].join(' ').toLowerCase().includes(search.toLowerCase())\n                    )\n                    .map((product) => (\n                      <TableRow key={product.id} hover>\n                        <TableCell sx={{ fontWeight: 500 }}>{product.sku}</TableCell>\n                        <TableCell>{product.name}</TableCell>\n                        <TableCell>\n                          {product.stock_quantity > 0 ? (\n                            <Chip label={`${product.stock_quantity} in stock`} color=\"success\" size=\"small\" />\n                          ) : (\n                            <Chip label=\"Out of stock\" color=\"error\" size=\"small\" />\n                          )}\n                        </TableCell>\n                        <RoleRequired allowedRoles={['Admin', 'Manager']}>\n                          <TableCell align=\"center\">\n                            <Stack direction=\"row\" spacing={1} justifyContent=\"center\">\n                              <Button variant=\"outlined\" size=\"small\" startIcon={<EditIcon />} onClick={() => handleShowEditModal(product)}>\n                                Edit\n                              </Button>\n                              <Button variant=\"outlined\" color=\"error\" size=\"small\" startIcon={<ArchiveIcon />} onClick={() => handleArchive(product.id)}>\n                                Archive\n                              </Button>\n                            </Stack>\n                          </TableCell>\n                        </RoleRequired>\n                      </TableRow>\n                    ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </CardContent>\n      </Card>\n\n      <ProductFormModal\n        show={showModal}\n        handleClose={handleCloseModal}\n        product={selectedProduct}\n        onSave={handleSave}\n      />\n    </Box>\n  );\n}\n\nexport default ProductsPage;"],"mappings":";;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}