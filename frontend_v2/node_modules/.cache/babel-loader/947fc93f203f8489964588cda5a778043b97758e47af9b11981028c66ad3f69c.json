{"ast":null,"code":"// src/context/AuthContext.js\nimport React,{createContext,useState,useContext,useEffect}from'react';import{jwtDecode}from'jwt-decode';// Note: We no longer need to import 'api' here\nimport{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(null);export const AuthProvider=_ref=>{let{children}=_ref;const[tokens,setTokens]=useState(()=>localStorage.getItem('authTokens')?JSON.parse(localStorage.getItem('authTokens')):null);const[user,setUser]=useState(()=>localStorage.getItem('authTokens')?jwtDecode(JSON.parse(localStorage.getItem('authTokens')).access):null);const loginUser=newTokens=>{setTokens(newTokens);setUser(jwtDecode(newTokens.access));localStorage.setItem('authTokens',JSON.stringify(newTokens));};const logoutUser=()=>{setTokens(null);setUser(null);localStorage.removeItem('authTokens');};// The useEffect that set the api header is no longer needed.\nconst contextData={user,tokens,loginUser,logoutUser};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:contextData,children:children});};export const useAuth=()=>{return useContext(AuthContext);};","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","jwtDecode","jsx","_jsx","AuthContext","AuthProvider","_ref","children","tokens","setTokens","localStorage","getItem","JSON","parse","user","setUser","access","loginUser","newTokens","setItem","stringify","logoutUser","removeItem","contextData","Provider","value","useAuth"],"sources":["/Users/abr/inventor/frontend/src/context/AuthContext.js"],"sourcesContent":["// src/context/AuthContext.js\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { jwtDecode } from 'jwt-decode';\n// Note: We no longer need to import 'api' here\n\nconst AuthContext = createContext(null);\n\nexport const AuthProvider = ({ children }) => {\n  const [tokens, setTokens] = useState(() => \n    localStorage.getItem('authTokens') \n      ? JSON.parse(localStorage.getItem('authTokens')) \n      : null\n  );\n  \n  const [user, setUser] = useState(() => \n    localStorage.getItem('authTokens') \n      ? jwtDecode(JSON.parse(localStorage.getItem('authTokens')).access) \n      : null\n  );\n\n  const loginUser = (newTokens) => {\n    setTokens(newTokens);\n    setUser(jwtDecode(newTokens.access));\n    localStorage.setItem('authTokens', JSON.stringify(newTokens));\n  };\n\n  const logoutUser = () => {\n    setTokens(null);\n    setUser(null);\n    localStorage.removeItem('authTokens');\n  };\n  \n  // The useEffect that set the api header is no longer needed.\n  \n  const contextData = {\n    user,\n    tokens,\n    loginUser,\n    logoutUser,\n  };\n  \n  return (\n    <AuthContext.Provider value={contextData}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  return useContext(AuthContext);\n};"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC7E,OAASC,SAAS,KAAQ,YAAY,CACtC;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBAEA,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,IAAI,CAAC,CAEvC,MAAO,MAAM,CAAAQ,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,IACnCY,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAC9BC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,CAC9C,IACN,CAAC,CAED,KAAM,CAACG,IAAI,CAAEC,OAAO,CAAC,CAAGjB,QAAQ,CAAC,IAC/BY,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAC9BV,SAAS,CAACW,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,CAACK,MAAM,CAAC,CAChE,IACN,CAAC,CAED,KAAM,CAAAC,SAAS,CAAIC,SAAS,EAAK,CAC/BT,SAAS,CAACS,SAAS,CAAC,CACpBH,OAAO,CAACd,SAAS,CAACiB,SAAS,CAACF,MAAM,CAAC,CAAC,CACpCN,YAAY,CAACS,OAAO,CAAC,YAAY,CAAEP,IAAI,CAACQ,SAAS,CAACF,SAAS,CAAC,CAAC,CAC/D,CAAC,CAED,KAAM,CAAAG,UAAU,CAAGA,CAAA,GAAM,CACvBZ,SAAS,CAAC,IAAI,CAAC,CACfM,OAAO,CAAC,IAAI,CAAC,CACbL,YAAY,CAACY,UAAU,CAAC,YAAY,CAAC,CACvC,CAAC,CAED;AAEA,KAAM,CAAAC,WAAW,CAAG,CAClBT,IAAI,CACJN,MAAM,CACNS,SAAS,CACTI,UACF,CAAC,CAED,mBACElB,IAAA,CAACC,WAAW,CAACoB,QAAQ,EAACC,KAAK,CAAEF,WAAY,CAAAhB,QAAA,CACtCA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,MAAO,MAAM,CAAAmB,OAAO,CAAGA,CAAA,GAAM,CAC3B,MAAO,CAAA3B,UAAU,CAACK,WAAW,CAAC,CAChC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}