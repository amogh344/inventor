{"ast":null,"code":"// // frontend_v2/src/pages/AuditTrailPage.js\n// import React, { useState, useEffect, useCallback } from 'react';\n// import { Container, Table, Spinner, Alert, Card } from 'react-bootstrap';\n// import { getAuditLogs } from '../services/api';\n// import EmptyState from '../components/ui/EmptyState';\n\n// function AuditTrailPage() {\n//   const [logs, setLogs] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState('');\n\n//   const fetchLogs = useCallback(async () => {\n//     try {\n//       setLoading(true);\n//       const response = await getAuditLogs();\n//       setLogs(response.data);\n//     } catch (err) {\n//       setError(\n//         'Failed to fetch audit logs. You may not have permission to view this page.'\n//       );\n//     } finally {\n//       setLoading(false);\n//     }\n//   }, []);\n\n//   useEffect(() => {\n//     fetchLogs();\n//   }, [fetchLogs]);\n\n//   if (loading)\n//     return (\n//       <Container className=\"text-center mt-5\">\n//         <Spinner animation=\"border\" />\n//       </Container>\n//     );\n\n//   return (\n//     <Container className=\"my-4\">\n//       {/* Page Header */}\n//       <div className=\"mb-3\">\n//         <h2 className=\"fw-semibold mb-1\">\n//           <i className=\"bi bi-person-lines-fill me-2 text-primary\" /> Audit Trail\n//         </h2>\n//         <p className=\"text-muted mb-0\">\n//           A log of all significant user actions in the system.\n//         </p>\n//       </div>\n\n//       {error && <Alert variant=\"danger\">{error}</Alert>}\n\n//       {!loading && logs.length === 0 ? (\n//         <EmptyState\n//           title=\"No audit logs found\"\n//           description=\"There are no records available to display at the moment.\"\n//         />\n//       ) : (\n//         <Card className=\"shadow-sm border-0\">\n//           <Card.Body className=\"p-0\">\n//             <Table\n//               striped\n//               hover\n//               responsive\n//               className=\"align-middle mb-0 table-sticky\"\n//             >\n//               <thead className=\"table-light\">\n//                 <tr>\n//                   <th>Timestamp</th>\n//                   <th>User</th>\n//                   <th>Action</th>\n//                   <th>Object</th>\n//                 </tr>\n//               </thead>\n//               <tbody>\n//                 {logs.map((log) => (\n//                   <tr key={log.id}>\n//                     <td>{new Date(log.timestamp).toLocaleString()}</td>\n//                     <td>{log.user ? log.user.username : 'System'}</td>\n//                     <td>\n//                       <span\n//                         className={`badge rounded-pill ${\n//                           log.action === 'CREATED'\n//                             ? 'bg-success'\n//                             : log.action === 'DELETED'\n//                             ? 'bg-danger'\n//                             : 'bg-secondary'\n//                         }`}\n//                       >\n//                         {log.action}\n//                       </span>\n//                     </td>\n//                     <td>{log.object_repr}</td>\n//                   </tr>\n//                 ))}\n//               </tbody>\n//             </Table>\n//           </Card.Body>\n//         </Card>\n//       )}\n//     </Container>\n//   );\n// }\n\n// export default AuditTrailPage;","map":{"version":3,"names":[],"sources":["/Users/abr/inventor/frontend_v2/src/pages/AuditTrailPage.js"],"sourcesContent":["// // frontend_v2/src/pages/AuditTrailPage.js\n// import React, { useState, useEffect, useCallback } from 'react';\n// import { Container, Table, Spinner, Alert, Card } from 'react-bootstrap';\n// import { getAuditLogs } from '../services/api';\n// import EmptyState from '../components/ui/EmptyState';\n\n// function AuditTrailPage() {\n//   const [logs, setLogs] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState('');\n\n//   const fetchLogs = useCallback(async () => {\n//     try {\n//       setLoading(true);\n//       const response = await getAuditLogs();\n//       setLogs(response.data);\n//     } catch (err) {\n//       setError(\n//         'Failed to fetch audit logs. You may not have permission to view this page.'\n//       );\n//     } finally {\n//       setLoading(false);\n//     }\n//   }, []);\n\n//   useEffect(() => {\n//     fetchLogs();\n//   }, [fetchLogs]);\n\n//   if (loading)\n//     return (\n//       <Container className=\"text-center mt-5\">\n//         <Spinner animation=\"border\" />\n//       </Container>\n//     );\n\n//   return (\n//     <Container className=\"my-4\">\n//       {/* Page Header */}\n//       <div className=\"mb-3\">\n//         <h2 className=\"fw-semibold mb-1\">\n//           <i className=\"bi bi-person-lines-fill me-2 text-primary\" /> Audit Trail\n//         </h2>\n//         <p className=\"text-muted mb-0\">\n//           A log of all significant user actions in the system.\n//         </p>\n//       </div>\n\n//       {error && <Alert variant=\"danger\">{error}</Alert>}\n\n//       {!loading && logs.length === 0 ? (\n//         <EmptyState\n//           title=\"No audit logs found\"\n//           description=\"There are no records available to display at the moment.\"\n//         />\n//       ) : (\n//         <Card className=\"shadow-sm border-0\">\n//           <Card.Body className=\"p-0\">\n//             <Table\n//               striped\n//               hover\n//               responsive\n//               className=\"align-middle mb-0 table-sticky\"\n//             >\n//               <thead className=\"table-light\">\n//                 <tr>\n//                   <th>Timestamp</th>\n//                   <th>User</th>\n//                   <th>Action</th>\n//                   <th>Object</th>\n//                 </tr>\n//               </thead>\n//               <tbody>\n//                 {logs.map((log) => (\n//                   <tr key={log.id}>\n//                     <td>{new Date(log.timestamp).toLocaleString()}</td>\n//                     <td>{log.user ? log.user.username : 'System'}</td>\n//                     <td>\n//                       <span\n//                         className={`badge rounded-pill ${\n//                           log.action === 'CREATED'\n//                             ? 'bg-success'\n//                             : log.action === 'DELETED'\n//                             ? 'bg-danger'\n//                             : 'bg-secondary'\n//                         }`}\n//                       >\n//                         {log.action}\n//                       </span>\n//                     </td>\n//                     <td>{log.object_repr}</td>\n//                   </tr>\n//                 ))}\n//               </tbody>\n//             </Table>\n//           </Card.Body>\n//         </Card>\n//       )}\n//     </Container>\n//   );\n// }\n\n// export default AuditTrailPage;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}